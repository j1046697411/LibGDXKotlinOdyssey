# lko-datastructure 未实现需求

## 一、数学计算模块扩展

### 1. 角度计算增强
- **Angle.sin()**: 计算角度的正弦值
- **Angle.cos()**: 计算角度的余弦值
- **Angle.tan()**: 计算角度的正切值
- **Angle.atan()**: 计算角度的反正切值
- **Angle.toDegrees()**: 将弧度转换为角度
- **Angle.toRadians()**: 将角度转换为弧度
- **Angle.normalize()**: 将角度归一化到 [-π, π] 范围

### 2. 向量操作扩展
- **Vector2.normalize()**: 向量归一化
- **Vector2.length()**: 计算向量长度
- **Vector2.lengthSquared()**: 计算向量长度的平方
- **Vector2.dot(other: Vector2)**: 向量点积计算
- **Vector2.cross(other: Vector2)**: 向量叉积计算
- **Vector2.reflect(normal: Vector2)**: 向量反射计算
- **Vector3.normalize()**: 向量归一化
- **Vector3.length()**: 计算向量长度
- **Vector3.lengthSquared()**: 计算向量长度的平方
- **Vector3.dot(other: Vector3)**: 向量点积计算
- **Vector3.cross(other: Vector3)**: 向量叉积计算
- **Vector3.reflect(normal: Vector3)**: 向量反射计算
- **Vector4.normalize()**: 向量归一化
- **Vector4.length()**: 计算向量长度
- **Vector4.lengthSquared()**: 计算向量长度的平方
- **Vector4.dot(other: Vector4)**: 向量点积计算

### 3. 矩阵操作扩展
- **Matrix3.determinant()**: 计算3x3矩阵的行列式
- **Matrix3.invert()**: 计算3x3矩阵的逆矩阵
- **Matrix3.scale(x: Float, y: Float)**: 矩阵缩放操作
- **Matrix3.translate(x: Float, y: Float)**: 矩阵平移操作
- **Matrix3.rotate(angle: Angle)**: 矩阵旋转操作
- **Matrix4.determinant()**: 计算4x4矩阵的行列式
- **Matrix4.invert()**: 计算4x4矩阵的逆矩阵
- **Matrix4.scale(x: Float, y: Float, z: Float)**: 矩阵缩放操作
- **Matrix4.rotate(axis: Vector3, angle: Angle)**: 矩阵绕轴旋转
- **Matrix4.lookAt(eye: Vector3, target: Vector3, up: Vector3)**: 完善lookAt方法实现
- **Matrix4.perspective(fov: Angle, aspect: Float, near: Float, far: Float)**: 创建透视投影矩阵
- **Matrix4.orthographic(left: Float, right: Float, bottom: Float, top: Float, near: Float, far: Float)**: 创建正交投影矩阵

### 4. 几何形状扩展
- **Circle** 类: 实现圆形几何形状
  - 构造方法: Circle(center: Vector2, radius: Float)
  - contains(point: Vector2): Boolean - 判断点是否在圆内
  - intersects(other: Circle): Boolean - 判断两圆是否相交
  - intersects(rect: Rectangle): Boolean - 判断圆与矩形是否相交
- **Line** 类: 实现线段几何形状
  - 构造方法: Line(start: Vector2, end: Vector2)
  - length(): Float - 计算线段长度
  - midpoint(): Vector2 - 计算线段中点
  - intersects(other: Line): Vector2? - 计算两线段交点
- **Triangle** 类: 实现三角形几何形状
  - 构造方法: Triangle(a: Vector2, b: Vector2, c: Vector2)
  - area(): Float - 计算三角形面积
  - contains(point: Vector2): Boolean - 判断点是否在三角形内
  - barycentric(point: Vector2): Vector3 - 计算点的重心坐标
- **Polygon** 类: 实现多边形几何形状
  - 构造方法: Polygon(vertices: List<Vector2>)
  - area(): Float - 计算多边形面积
  - centroid(): Vector2 - 计算多边形质心
  - contains(point: Vector2): Boolean - 判断点是否在多边形内
  - intersects(other: Polygon): Boolean - 判断两多边形是否相交

## 二、数据结构扩展

### 1. FastList 增强
- **ObjectFastList<T>.sort(comparator: Comparator<T>)**: 对象列表排序
- **PrimitiveFastList<T>.sort()**: 原始类型列表排序
- **FastList<T>.binarySearch(element: T)**: 二分查找
- **FastList<T>.reversed()**: 反转列表
- **FastList<T>.shuffled()**: 随机打乱列表
- **FastList<T>.distinct()**: 去重
- **FastList<T>.chunked(size: Int)**: 分块

### 2. 新数据结构实现
- **KDTree<T>** 类: 实现K-D树数据结构
  - 构造方法: KDTree(dimensions: Int)
  - insert(point: FloatArray, value: T): Boolean - 插入点和对应值
  - remove(point: FloatArray): Boolean - 删除点
  - nearestNeighbor(point: FloatArray): Pair<FloatArray, T>? - 查找最近邻
  - rangeSearch(min: FloatArray, max: FloatArray): List<T> - 范围搜索
- **Octree<T>** 类: 实现八叉树数据结构
  - 构造方法: Octree(bounds: AABB3D)
  - insert(position: Vector3, value: T): Boolean - 插入点和对应值
  - remove(position: Vector3): Boolean - 删除点
  - findNeighbors(position: Vector3, radius: Float): List<T> - 查找邻近点
- **Graph<T>** 类: 实现图数据结构
  - 构造方法: Graph()
  - addNode(node: T): Boolean - 添加节点
  - removeNode(node: T): Boolean - 删除节点
  - addEdge(from: T, to: T, weight: Float = 1f): Boolean - 添加边
  - removeEdge(from: T, to: T): Boolean - 删除边
  - shortestPath(from: T, to: T): List<T> - 寻找最短路径(Dijkstra算法)

## 三、BVH 模块扩展

### 1. BVH 性能优化
- **BVH<T>.optimize()**: 对现有BVH树进行重构优化
- **BVH<T>.setRebuildThreshold(threshold: Int)**: 设置自动重构阈值
- **BVH<T>.getMemoryUsage()**: 计算BVH树内存占用

### 2. 高级查询功能
- **BVH2<T>.raycast(ray: Ray2D, result: RaycastResult<T>)**: 射线投射，返回最近交点
- **BVH3<T>.raycast(ray: Ray3D, result: RaycastResult<T>)**: 射线投射，返回最近交点
- **BVH<T>.multiIntersect(rays: List<BVHRay>, result: MutableMap<BVHRay, List<T>>)**: 多射线相交测试
- **BVH<T>.frustumCull(frustum: Frustum)**: 视锥体剔除

### 3. 并行处理支持
- **BVH<T>.parallelBulkInsert(items: Sequence<T>, callback: T.(BVHRect) -> Unit)**: 并行批量插入
- **BVH<T>.parallelSearchValues(block: BVHRect.() -> Unit)**: 并行搜索

## 四、算法实现

### 1. 计算几何算法
- **ConvexHull**: 凸包算法实现
  - grahamScan(points: List<Vector2>): List<Vector2> - Graham扫描法
  - jarvisMarch(points: List<Vector2>): List<Vector2> - Jarvis行进法
- **Boolean Operations**: 布尔运算
  - polygonUnion(a: Polygon, b: Polygon): Polygon - 多边形并集
  - polygonIntersection(a: Polygon, b: Polygon): Polygon - 多边形交集
  - polygonDifference(a: Polygon, b: Polygon): Polygon - 多边形差集
- **Distance Calculations**: 距离计算
  - distancePointToLine(point: Vector2, line: Line): Float - 点到线段距离
  - distancePointToPlane(point: Vector3, plane: Plane): Float - 点到平面距离
  - distanceLineToLine(line1: Line3D, line2: Line3D): Float - 线段间距离

### 2. 数值算法
- **Interpolation**: 插值算法
  - catmullRom(p0: Vector2, p1: Vector2, p2: Vector2, p3: Vector2, t: Float): Vector2 - Catmull-Rom插值
  - bezier(controlPoints: List<Vector2>, t: Float): Vector2 - 贝塞尔曲线插值
- **Fitting**: 拟合算法
  - leastSquares(points: List<Vector2>): Line - 最小二乘直线拟合

## 五、跨平台支持增强

### 1. 平台特定优化
- **JVM平台优化**: 为JVM平台提供更高效的实现
- **JS平台优化**: 为JavaScript平台提供更高效的实现
- **Native平台优化**: 为原生平台提供更高效的实现

### 2. 测试覆盖提升
- **单元测试扩展**: 增加更多单元测试用例
- **性能基准测试**: 添加性能基准测试
- **跨平台兼容性测试**: 确保在所有目标平台上的兼容性

### 3. 文档与示例完善
- **API文档完善**: 为所有类和方法添加详细的KDoc注释
- **使用示例**: 提供更多使用示例和代码片段
- **性能优化指南**: 提供性能优化的最佳实践指南

## 六、工具类扩展

### 1. 随机数生成
- **RandomUtils**: 随机数生成工具类
  - nextVector2(min: Vector2, max: Vector2): Vector2 - 生成随机二维向量
  - nextVector3(min: Vector3, max: Vector3): Vector3 - 生成随机三维向量
  - nextMatrix3(): Matrix3 - 生成随机3x3矩阵
  - nextMatrix4(): Matrix4 - 生成随机4x4矩阵

### 2. 序列化支持
- **FastList序列化**: 为FastList提供序列化和反序列化支持
- **数学类型序列化**: 为Vector、Matrix等数学类型提供序列化支持

### 3. 调试工具
- **DebugUtils**: 调试辅助工具
  - printMatrix(matrix: Matrix4): String - 格式化输出矩阵
  - visualizeBVH(bvh: BVH<*>): String - 可视化BVH树结构
