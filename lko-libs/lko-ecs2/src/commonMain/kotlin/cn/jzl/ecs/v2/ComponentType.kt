package cn.jzl.ecs.v2

/**
 * ComponentType - 组件类型标识抽象类
 *
 * 实现逻辑：
 * 1. 作为组件类型的唯一标识基类，为每个组件类型分配一个唯一索引
 * 2. 使用原子计数器确保索引分配的线程安全性
 * 3. 在类实例化时自动生成并分配索引，无需手动管理
 * 4. 索引用于组件的快速查找、位运算和存储优化
 *
 * 这个类是ECS系统类型安全和高性能的关键部分，它：
 * - 实现了组件类型的运行时识别
 * - 支持组件类型到索引的映射，用于位运算优化
 * - 确保类型安全性，防止不同组件类型的混淆
 * - 提供高效的组件查找机制，支持快速的实体过滤
 *
 * @param T 组件类型的实际数据类型
 */
abstract class ComponentType<T> {
    /**
     * 组件类型的唯一索引
     *
     * 索引特性：
     * - 在类实例化时自动分配，从0开始递增
     * - 使用原子操作保证线程安全
     * - 索引在应用运行期间保持稳定
     * - 用于BitSet和数组索引等性能优化场景
     */
    val index: Int = idGenerator.getAndIncrement()
}