# 功能规范: 主界面框架设计（1920×1080优化版）

**功能分支**: `004-main-ui-framework`
**创建时间**: 2025-12-21
**状态**: 草稿
**输入**: 用户描述: "实现主界面框架设计的主要布局架构"

## 用户场景与测试

### 用户故事 1 - 游戏主界面导航 (优先级: P1)

玩家打开游戏后，进入主界面，能够通过左侧菜单栏和顶部导航栏快速访问不同的游戏功能，如宗门管理、弟子管理、资源管理等。

**优先级原因**: 主界面导航是玩家与游戏交互的核心入口，直接影响游戏体验。

**独立测试**: 可以通过点击菜单选项或使用快捷键验证导航功能是否正常工作。

**验收场景**:

1. **给定** 玩家已进入游戏主界面，**当** 点击左侧菜单栏的"宗门总览"选项，**那么** 中央内容区应显示宗门总览信息。
2. **给定** 玩家已进入游戏主界面，**当** 按下快捷键"Shift+1"，**那么** 中央内容区应显示宗门总览信息。
3. **给定** 玩家已进入游戏主界面，**当** 点击顶部导航栏的"任务"选项，**那么** 中央内容区应显示任务大厅信息。

### 用户故事 2 - 任务管理 (优先级: P2)

玩家在主界面中央内容区的任务大厅，能够查看、接受、完成和管理游戏任务。

**优先级原因**: 任务系统是游戏的核心玩法之一，玩家需要方便地管理任务。

**独立测试**: 可以通过在任务大厅查看任务列表、接受任务、查看任务详情等操作验证任务管理功能是否正常工作。

**验收场景**:

1. **给定** 玩家在任务大厅，**当** 点击"前往千绝谷采集灵草"任务的"接受"按钮，**那么** 任务状态应变为"进行中"，并显示在已接任务列表中。
2. **给定** 玩家在任务大厅，**当** 点击"任务详情"标签页，**那么** 应显示当前选中任务的详细信息。
3. **给定** 玩家在任务大厅，**当** 使用上下箭头键导航任务列表，**那么** 应高亮显示当前选中的任务。

### 用户故事 3 - 角色信息查看 (优先级: P3)

玩家在主界面右侧信息区，能够查看当前角色的核心属性、状态加成和快捷操作。

**优先级原因**: 角色信息是玩家了解自身实力和状态的重要途径。

**独立测试**: 可以通过查看右侧信息区的角色属性、状态加成和使用快捷操作验证角色信息查看功能是否正常工作。

**验收场景**:

1. **给定** 玩家在主界面，**当** 查看右侧信息区，**那么** 应显示当前角色的气血、灵力、寿元等核心属性。
2. **给定** 玩家在主界面，**当** 点击右侧信息区的"F1帮助"快捷操作，**那么** 应打开游戏帮助界面。
3. **给定** 玩家在主界面，**当** 折叠右侧信息区，**那么** 右侧信息区应隐藏，中央内容区应自动调整宽度。

## 需求

### 功能需求

- **FR-001**: 系统必须实现1920×1080分辨率优化的主界面布局，针对160字符×60行分辨率优化。
- **FR-002**: 系统必须实现左:中:右 = 2:5:2的视觉焦点比例。
- **FR-003**: 系统必须提供清晰的层次结构，通过边框、分隔线和缩进区分不同功能区域。
- **FR-004**: 系统必须实现信息模块化，将相关信息分组展示，便于用户快速获取。
- **FR-005**: 系统必须提供友好的交互设计，包括快捷键支持和状态反馈。
- **FR-006**: 系统必须实现响应式设计，支持动态布局调整和可折叠区域。
- **FR-007**: 系统必须显示核心游戏信息，包括宗门名称、时间、资源、弟子数量等。
- **FR-008**: 系统必须提供功能导航，包括核心管理、功能区域、生产系统和系统设置。
- **FR-009**: 系统必须展示当前功能的详细内容，如任务列表、弟子信息、资源状态等。
- **FR-010**: 系统必须显示当前角色的核心属性和状态加成。
- **FR-011**: 系统必须显示系统信息和快捷键提示。
- **FR-012**: 系统必须支持完整的快捷键系统，包括功能导航、操作确认等。

### 关键实体

- **界面区域**: 代表主界面的不同功能区域，如顶部导航栏、左侧菜单栏、中央内容区、右侧信息区、底部状态栏。
- **菜单选项**: 代表游戏的不同功能选项，如宗门总览、弟子管理、资源管理等。
- **任务**: 代表游戏中的任务，包括主线任务、日常任务、委托任务等。
- **角色属性**: 代表玩家角色的核心属性，如气血、灵力、寿元、贡献等。
- **状态加成**: 代表角色获得的各种加成效果，如建筑加成、丹药加成等。

## 成功标准

### 可衡量的结果

- **SC-001**: 玩家能够在3秒内通过菜单或快捷键导航到任意游戏功能。
- **SC-002**: 主界面布局在1920×1080分辨率下显示正常，各区域比例符合设计要求。
- **SC-003**: 所有快捷键操作能够在100ms内响应。
- **SC-004**: 长列表滚动时，帧率保持在60fps以上。
- **SC-005**: 90%以上的玩家能够在5分钟内熟悉主界面布局和操作方式。
- **SC-006**: 主界面能够适应不同的游戏模式，如战斗场景、聊天场景等。

## 设计

### 1. 设计原则
- **1920×1080优化**：针对160字符×60行分辨率优化布局
- **视觉焦点比例**：左:中:右 = 2:5:2
- **清晰层次**：通过边框、分隔线和缩进区分不同功能区域
- **信息模块化**：将相关信息分组展示，便于用户快速获取
- **交互友好**：提供明确的操作选项和状态反馈
- **视觉平衡**：合理分配界面空间，避免信息拥挤
- **快捷键支持**：提供常用操作的快捷键，提升操作效率
- **状态可视化**：使用图标和颜色（通过文本符号模拟）表示不同状态
- **响应式设计**：动态布局调整、可折叠区域设计，适应不同屏幕尺寸
- **聚焦核心**：简化界面，聚焦核心功能，提升用户体验

### 2. 主界面布局结构

#### 整体布局比例

| 区域 | 行数 | 字符数 | 比例 | 功能 |
|------|------|--------|------|------|
| 顶部导航栏 | 3 | 160 | 5% | 显示核心游戏信息 |
| 左侧菜单栏 | 52 | 30 | 19% | 提供功能导航 |
| 中央内容区 | 34 | 100 | 62% | 展示当前功能详细内容 |
| 右侧信息区 | 15 | 30 | 19% | 显示角色信息和快捷操作 |
| 底部状态栏 | 5 | 160 | 8% | 显示系统信息和快捷键提示 |

#### 完整主界面框架

```
┌────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│ 🔹 青云宗·千绝谷 ☀️ ⏳125年·3月·20日·14:30 [x1] 🔍搜索：_ [详情▶]                                                                                           │
│ 🔹 弟子总数：128 | 资源：灵石25000 | 设施：12 | 占领区域：5 | 声望：8500 | 状态：稳定                                                                 │
│ 🔹 核心管理：🏠宗门·👥弟子·📦资源·🏗️设施 | 功能区域：🗺️地图·📋任务·📚功法 | 生产系统：🧪炼丹·⚒️炼器 | 系统：👤社交·⚙️设置                          │
├──────────────────────────────────────────┬────────────────────────────────────────────────────────────────────────────────────────┬──────────────────────────────────────────┤
│ 【核心管理】                                                                                          │ 【📋 任务大厅】                                                                                            │ 👤林玄风·金丹中期                                                                                     │
│ 1🏠宗门总览                                                                                          │ ───────────────────────────────────────────────────────────────────────────────────────── ┤ ────────────────────────────────────────── │
│ 2👥弟子管理                                                                                          │ 【任务筛选】                                                                                              │ 💗2850/2850 💠1240/1800                                                                                 │
│ 3📦资源管理                                                                                          │ 🔹 类型：【主线】【日常】【委托】【试炼】                                                                 │ ⏳寿元：128年 · ✨贡献：2450                                                                              │
│ 4🏗️设施建设                                                                                          │ 🔹 难度：【无要求】【炼气】【筑基】【金丹】                                                                 │ ✅青灵殿+15% · ✅聚气丹+20%                                                                               │
│                                                                                                       │ ───────────────────────────────────────────────────────────────────────────────────────── ┤ ────────────────────────────────────────── │
│ 【功能区域】                                                                                          │ ⭐ 【主线】前往千绝谷采集灵草 (筑基)                                                                       │ 【快捷操作】                                                                                           │
│ 5🗺️地图探索                                                                                          │    要求：修为≥筑基中期 | 奖励：贡献500, 筑基丹×1                                                         │ /搜索 | F1帮助                                                                                        │
│ 6📋任务大厅                                                                                          │    状态：可接受 | [接受] [放弃] [查看详情]                                                               │ S设置 | ESC菜单                                                                                       │
│ 7📚功法堂                                                                                            │ ───────────────────────────────────────────────────────────────────────────────────────── ┤                                                                 │
│                                                                                                       │ ◆ 【日常】宗门巡逻 (无要求)                                                                             │ 【当前状态】                                                                                           │
│ 【生产系统】                                                                                          │    要求：无 | 奖励：贡献100, 灵石×50                                                                     │ 正在执行：任务大厅 · 效率：120%                                                                         │
│ 8🧪炼丹房                                                                                            │    状态：可接受 | [接受] [放弃] [查看详情]                                                               │ 操作中任务：0/5                                                                                       │
│ 9⚒️炼器房                                                                                            │ ───────────────────────────────────────────────────────────────────────────────────────── ┤                                                                 │
│                                                                                                       │ ▲ 【委托】帮李长老寻找丢失的玉简 (筑基)                                                                 │ 【状态加成】                                                                                           │
│ 【系统】                                                                                              │    要求：神识≥200 | 奖励：贡献300, 低级功法×1                                                           │ ✅青灵殿+15% · ✅聚气丹+20%                                                                               │
│ 0👤社交                                                                                              │    状态：进行中 | [放弃] [查看详情] [加速]                                                               │ ✅灵田+10% · ✅聚灵阵+5%                                                                                │
│ S⚙️设置                                                                                              │ ───────────────────────────────────────────────────────────────────────────────────────── ┤                                                                 │
│                                                                                                       │ 【功能标签页】                                                                                          │                                                                                                       │
│                                                                                                       │ ▶ 任务列表     ▶ 任务详情     ▶ 任务日志                                                               │                                                                                                       │
│                                                                                                       │ ───────────────────────────────────────────────────────────────────────────────────────── ┤                                                                 │
│                                                                                                       │ 【任务统计】                                                                                              │                                                                                                       │
│                                                                                                       │ 🔹 已接任务：3 | 可接任务：12 | 完成任务：45                                                              │                                                                                                       │
│                                                                                                       │ 🔹 今日完成：2 | 本周完成：15 | 本月完成：58                                                              │                                                                                                       │
│                                                                                                       │ ───────────────────────────────────────────────────────────────────────────────────────── ┤                                                                 │
│                                                                                                       │ 【最新任务】                                                                                              │                                                                                                       │
│                                                                                                       │ 🔔 新任务：前往黑风林采集木材 (无要求)                                                                   │                                                                                                       │
│                                                                                                       │ 🔔 新任务：帮助张长老炼制丹药 (筑基)                                                                     │                                                                                                       │
├──────────────────────────────────────────┴────────────────────────────────────────────────────────────────────────────────────────┴──────────────────────────────────────────┤
│ 🔔新任务(3) | 💬弟子传讯(5) | 📈宗门事件 | 自动存档:开 | F1帮助 | ESC菜单 | 当前模式：任务大厅 | 游戏速度：正常×1 | 运行时间：8小时30分钟 | 版本：v1.0.0 │
│ 🔹 快捷键提示：Shift+1-9切换功能 | /搜索 | F1帮助 | S设置 | ESC菜单 | 空格跳过 | A自动战斗 | Tab切换标签 | 上下箭头导航 | Enter确认 | Ctrl+C复制 | Ctrl+V粘贴 │
│ 🔹 消息提示：1. 弟子张无忌已完成巡逻任务 | 2. 千绝谷灵草成熟 | 3. 玄水阁使者来访 | 4. 血魔宗在附近活动 | 5. 新弟子报名参加宗门 │
│ 🔹 系统状态：内存使用：1.2GB | CPU使用率：15% | 网络：正常 | 存档：自动 (上次：5分钟前) | 日志：正常 | 音效：开启 | 音乐：开启 │
│ 🔹 开发者信息：Build: 20251221 | Server: Local | Debug: Off | Version: v1.0.0 | API: v1 | Database: Connected │
└────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

### 3. 区域功能说明

#### 顶部导航栏
- **位置**：界面顶部，3行×160字符
- **功能**：显示核心游戏信息，提供快速访问和全局搜索
- **设计要点**：
  - 第一行：显示当前区域、天气、时间、游戏速度、全局搜索框
  - 第二行：显示宗门关键数据（弟子总数、资源、设施、占领区域等）
  - 第三行：显示功能分类导航
  - 支持点击展开详情模式
  - 集成全局搜索功能

#### 左侧菜单栏
- **位置**：界面左侧，52行×30字符
- **功能**：提供游戏主要功能的快速导航
- **设计要点**：
  - 分级菜单设计
  - 核心管理：宗门、弟子、资源、设施
  - 功能区域：地图、任务、功法
  - 生产系统：炼丹、炼器
  - 系统：社交、设置
  - 使用数字快捷键1-0,S快速访问
  - 当前选中项高亮显示

#### 中央内容区
- **位置**：界面中央，34行×100字符
- **功能**：展示当前选中功能的详细内容
- **设计要点**：
  - 占据界面最大空间，是核心交互区域
  - 顶部包含功能标签页，支持快速切换
  - 主体内容根据标签页选择动态变化
  - 信息排版清晰，操作按钮便于点击
  - 支持滚动显示长列表

#### 右侧信息区
- **位置**：界面右侧，15行×30字符
- **功能**：显示角色信息和快捷操作
- **设计要点**：
  - 显示当前角色的核心属性
  - 提供快捷操作按钮
  - 显示当前状态加成
  - 支持折叠/展开功能
  - 保持简洁，避免信息过载

#### 底部状态栏
- **位置**：界面底部，5行×160字符
- **功能**：显示系统信息和快捷键提示
- **设计要点**：
  - 第一行：显示当前模式、游戏速度、运行时间、版本号
  - 第二行：显示快捷键提示
  - 第三行：显示消息提示
  - 第四行：显示系统状态
  - 第五行：显示开发者信息
  - 支持滚动显示更多消息

### 4. 交互设计

#### 快捷键系统

| 快捷键 | 功能 |
|--------|------|
| Shift+1-4 | 快速切换核心管理功能 |
| Shift+5-7 | 快速切换功能区域 |
| Shift+8-9 | 快速切换生产系统 |
| Shift+0 | 打开社交界面 |
| S | 打开设置界面 |
| / | 聚焦全局搜索框 |
| F1 | 打开帮助界面 |
| ESC | 打开/关闭主菜单 |
| Tab | 切换标签页 |
| 上下箭头 | 导航列表 |
| Enter | 确认操作 |
| Space | 跳过/继续 |
| A | 自动战斗 |
| Ctrl+C | 复制 |
| Ctrl+V | 粘贴 |

#### 交互反馈
- 选中项高亮显示
- 按钮悬停效果
- 操作成功/失败提示
- 状态变化实时更新
- 战斗日志滚动显示
- 消息提示弹出

### 5. 响应式设计

#### 可折叠区域
- 右侧信息区支持折叠/展开
- 左侧菜单栏支持折叠/展开
- 顶部导航栏支持展开详情
- 底部状态栏支持折叠/展开

#### 动态布局调整
- 根据内容自动调整高度
- 长列表支持滚动
- 战斗场景特殊布局
- 对话框模态显示

### 6. 视觉设计

#### 颜色编码
- 🔹 普通信息
- 🔸 重点信息
- ⭐ 主线任务
- ◆ 日常任务
- ▲ 委托任务
- 🔔 消息提示
- 💬 聊天消息
- 📈 系统消息
- ✅ 正面效果
- ❌ 负面效果
- 🔴 敌人
- 🟢 我方

#### 图标系统
- 🏠 宗门
- 👥 弟子
- 📦 资源
- 🏗️ 设施
- 🗺️ 地图
- 📋 任务
- 📚 功法
- 🧪 炼丹
- ⚒️ 炼器
- 👤 社交
- ⚙️ 设置
- 💗 气血
- 💠 灵力
- ⏳ 寿元
- ✨ 贡献
- 🔍 搜索
- ☀️ 天气
- ⏳ 时间

## 测试计划

1. **布局测试**：验证主界面各区域的行数、字符数和比例是否符合设计要求
2. **交互测试**：验证快捷键系统、菜单导航、标签页切换等交互功能是否正常工作
3. **响应式测试**：验证可折叠区域、动态布局调整等响应式设计是否正常工作
4. **视觉测试**：验证颜色编码、图标系统等视觉设计是否符合设计要求
5. **性能测试**：验证长列表滚动、界面切换等操作的性能是否符合要求
6. **多场景测试**：验证主界面在不同游戏模式和功能需求下是否正常显示和工作

## 部署计划

1. **初始版本**：发布v1.0.0版本，支持1920×1080分辨率，实现基本布局结构
2. **后续优化**：根据用户反馈和功能需求持续优化，包括布局调整、功能增强、性能优化等
3. **全面推广**：在所有游戏模式中推广使用这个主界面框架

## 开放问题

1. 如何处理不同分辨率下的布局适配？
2. 如何优化长列表滚动性能？
3. 如何实现动态布局调整，根据内容自动调整高度？
4. 如何处理战斗场景的特殊布局需求？
5. 如何实现对话框模态显示，确保用户体验？